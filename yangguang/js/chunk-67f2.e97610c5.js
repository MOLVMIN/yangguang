(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67f2"],{"0b93":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticClass:"search-con search-con-top"},[a("Select",{staticClass:"search-col",attrs:{placeholder:"请选择搜索字段",clearable:""},on:{"on-clear":t.searchKeyChange,"on-change":t.searchKeyChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l([{key:"userName",title:"负责人"},{key:"fId",title:"所属部门"}],function(e){return a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])})),"userName"===t.searchKey?a("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"请输入部门负责人名称"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}):t._e(),"fId"===t.searchKey?a("Select",{staticClass:"search-col",staticStyle:{"margin-left":"2px"},attrs:{clearable:"",placeholder:"请选择所属部门"},model:{value:t.fId,callback:function(e){t.fId=e},expression:"fId"}},t._l(t.tableData,function(e){return a("Option",{key:"search-col-"+e.depart_id,attrs:{value:e.depart_id}},[t._v(t._s(e.depart_name))])})):t._e(),a("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.getDepartList}},[t._v("搜索")]),t._l(t.permissionBtns,function(e){return 17===e.p_id?a("Button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加部门")]):t._e()})],2),a("Table",{ref:"tablesMain",attrs:{data:t.tableData,columns:t.columns}}),a("Page",{staticClass:"page",attrs:{total:t.total,"page-size":t.pageSize,"show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange,"on-page-size-change":t.onPageSizeChange}})],1),a("Modal",{attrs:{width:"800","mask-closable":!1},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.modalTitle))])]),a("Form",[a("FormItem",[a("label",[t._v("部门名称：")]),a("Input",{attrs:{disabled:t.isView,placeholder:"请输入部门名称"},model:{value:t.departName,callback:function(e){t.departName=e},expression:"departName"}})],1),a("FormItem",[a("label",[t._v("负责人：")]),a("Select",{attrs:{disabled:t.isView},model:{value:t.departContactor,callback:function(e){t.departContactor=e},expression:"departContactor"}},t._l(t.departContactorList,function(e){return a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.label))])}))],1),a("FormItem",[a("label",[t._v("所属部门：")]),a("Select",{attrs:{disabled:t.isView},model:{value:t.departFid,callback:function(e){t.departFid=e},expression:"departFid"}},t._l(t.departFidList,function(e){return a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.label))])}))],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.isView||t.isEdit?t._e():a("Button",{attrs:{type:"info",size:"large"},on:{click:t.addDepart}},[t._v("保存")]),t.isEdit?a("Button",{attrs:{type:"success",size:"large"},on:{click:t.editDepart}},[t._v("修改")]):t._e()],1)],1)],1)},s=[],r=(a("ac4d"),a("8a81"),a("ac6a"),a("66df")),n=a("88ec"),o={name:"departe",data:function(){var t=this;return{columns:[{title:"序号",align:"center",key:"depart_id",sortable:!0},{title:"部门名称",align:"center",key:"depart_name",editable:!0},{title:"负责人",align:"center",key:"username",editable:!0},{title:"所属部门",align:"center",key:"fdepart_name",editable:!0},{title:"部门状态",align:"center",key:"data_level",render:function(t,e){return 1==e.row.data_level?t("div","正常"):5==e.row.data_level?t("div","已删除"):void 0}},{title:"操作",key:"handle",align:"center",render:function(e,a){for(var i=[],s=function(){var s=t.handleBtns[r];18===s.p_id?i.push(e("Button",{props:{type:"primary",size:"small",disabled:5===a.row.data_level},style:{margin:"2px"},on:{click:function(){t.editId=a.row.depart_id,t.showOneDepart(t.showOneDepartPath,a.row.depart_id),t.showModal=!0,t.isView=!1,t.isEdit=!0}}},"修改")):19===s.p_id?i.push(e("Button",{props:{type:"info",size:"small"},style:{margin:"2px"},on:{click:function(){t.showOneDepart(s.p_path,a.row.depart_id),t.showModal=!0,t.modalTitle="部门信息查看",t.isView=!0,t.isEdit=!1}}},"查看")):20===s.p_id?i.push(e("Button",{props:{type:"error",size:"small",disabled:5===a.row.data_level},style:{margin:"2px"},on:{click:function(){t.deleteDepart(s.p_path,a.row.depart_id)}}},"删除")):21===s.p_id&&i.push(e("Button",{props:{type:"warning",size:"small",disabled:1===a.row.data_level},style:{margin:"2px"},on:{click:function(){t.restoreDepart(s.p_path,a.row.depart_id)}}},"恢复"))},r=0;r<t.handleBtns.length;r++)s();return e("div",i)}}],departName:"",departContactor:"",departContactorList:[],departFid:0,departFidList:[],tableData:[],searchKey:"",searchValue:"",showModal:!1,modalTitle:"添加部门",isView:!1,isEdit:!1,editId:"",permissionBtns:[],handleBtns:[],total:0,pageSize:10,pageNum:1,getListPath:"",showOneDepartPath:""}},methods:{handleAdd:function(){this.showModal=!0},addDepart:function(){var t=this;r["a"].request({url:"admin/settings/depart/addEntity.do",data:{departName:t.departName,departContactor:t.departContactor,departFid:t.departFid},method:"post"}).then(function(e){200==e.data.code?(t.getDepartList(),t.showModal=!1,t.$Notice.success({title:"添加部门成功"})):t.$Notice.success({title:e.data.msg})})},editDepart:function(){var t=this;r["a"].request({url:"admin/settings/depart/editEntity.do",data:{departId:t.editId,departName:t.departName,departContactor:t.departContactor,departFid:t.departFid},method:"post"}).then(function(e){200==e.data.code?(t.getDepartList(),t.$Notice.success({title:"部门信息修改成功"}),t.showModal=!1):t.$Notice.error({title:e.data.msg})})},deleteDepart:function(t,e){var a=this;a.$Modal.confirm({title:"提示",content:"确认删除？",onOk:function(){r["a"].request({url:t,data:{entityId:e},method:"post"}).then(function(t){200==t.data.code?(a.getDepartList(),a.$Notice.success({title:"部门信息删除成功"}),a.getDepartList()):a.$Notice.error({title:t.data.msg})})}})},restoreDepart:function(t,e){var a=this;this.$Modal.confirm({title:"提示",content:"确认恢复该部门？",onOk:function(){var i=this;r["a"].request({url:t,data:{entityId:e},method:"post"}).then(function(t){200==t.data.code?(a.getDepartList(),i.$Notice.success({title:"部门信息恢复成功"})):i.$Notice.error({title:t.data.msg})})}})},showOneDepart:function(t,e){var a=this;r["a"].request({url:t,data:{entityId:e},method:"post"}).then(function(t){200===t.status?(a.departName=t.data.content.depart_name,a.departContactor=parseInt(t.data.content.depart_contactor),a.departFid=parseInt(t.data.content.depart_fid)):a.$Notice.error({title:t.data.msg})})},getUserList:function(){var t=this;r["a"].request({url:"admin/settings/worker/showEntity.do",data:{pageNum:1,pageSize:10},method:"post"}).then(function(e){if(200===e.status)for(var a=0;a<e.data.content.list.length;a++)5!==e.data.content.list[a].data_level&&t.departContactorList.push({key:e.data.content.list[a].id,label:e.data.content.list[a].username});else t.$Notice.error({title:e.data.msg})})},getDepartList:function(){var t=this;r["a"].request({url:t.getListPath,data:{pageNum:t.pageNum,pageSize:t.pageSize,userName:t.userName,fId:t.fId},method:"post"}).then(function(e){if(200===e.status){t.tableData=[],t.departFidList=[],t.total=e.data.content.total;for(var a=0;a<e.data.content.list.length;a++)t.tableData.push(e.data.content.list[a]),t.departFidList.push({key:e.data.content.list[a].depart_id,label:e.data.content.list[a].depart_name})}else t.$Notice.error({title:e.data.msg})})},getPermissionBtns:function(){this.permissionBtns=[];var t=!0,e=!1,a=void 0;try{for(var i,s=n["a"].permission[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var r=i.value;r.p_fid===this.$route.meta.id&&(this.permissionBtns.push(r),16===r.p_id&&(this.getListPath=r.p_path),19===r.p_id&&(this.showOneDepartPath=r.p_path),18!==r.p_id&&19!==r.p_id&&20!==r.p_id&&21!==r.p_id||this.handleBtns.push(r))}}catch(t){e=!0,a=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw a}}},pageOnChange:function(t){this.pageNum=t,this.getDepartList()},onPageSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getDepartList()},searchKeyChange:function(){this.userName="",this.fId=""}},mounted:function(){this.getPermissionBtns(),this.getUserList(),this.getDepartList()},watch:{showModal:function(t){t||(this.departName="",this.departContactor="",this.departFid="",this.isEdit=!1,this.isView=!1)}}},d=o,l=(a("db39"),a("2877")),c=Object(l["a"])(d,i,s,!1,null,null,null);c.options.__file="depart.vue";e["default"]=c.exports},"10e5":function(t,e,a){},db39:function(t,e,a){"use strict";var i=a("10e5"),s=a.n(i);s.a}}]);