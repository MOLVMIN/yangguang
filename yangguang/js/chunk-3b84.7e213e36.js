(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b84"],{"05e5":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Card",[i("div",{staticClass:"search-con search-con-top"},[i("Select",{staticClass:"search-col",attrs:{placeholder:"请选择搜索字段",clearable:""},on:{"on-clear":t.searchKeyChange,"on-change":t.searchKeyChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l([{key:"is_type",title:"类型"},{key:"is_title",title:"标题"}],function(e){return i("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])})),"is_type"===t.searchKey?i("Select",{staticClass:"search-col",attrs:{placeholder:"请选择类型",clearable:""},on:{"on-clear":t.searchKeyChange,"on-change":t.searchKeyChange},model:{value:t.is_type,callback:function(e){t.is_type=e},expression:"is_type"}},t._l(t.isTypeArr,function(e){return i("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])})):t._e(),"is_title"===t.searchKey?i("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入标题关键字搜索"},model:{value:t.is_title,callback:function(e){t.is_title=e},expression:"is_title"}}):t._e(),i("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.getDataList}},[i("Icon",{attrs:{type:"search"}}),t._v("搜索")],1),t._l(t.permissionBtns,function(e){return 216===e.p_id?i("Button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(t._s(e.p_name))]):t._e()})],2),i("Table",{ref:"tablesMain",attrs:{data:t.tableData,columns:t.columns}}),i("Page",{staticClass:"page",attrs:{total:t.total,"page-size":t.pageSize,"show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange,"on-page-size-change":t.onPageSizeChange}}),i("Upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{action:"http://47.106.109.254:8090/m/uploadImage.do",headers:t.header,name:"image","on-success":t.handleSuccess,"before-upload":t.handleBeforeUpload,"on-format-error":t.handleFormatError}},[i("Button",{attrs:{id:"upLoadImg",icon:"ios-cloud-upload-outline"}},[t._v("Upload files")])],1)],1),i("Modal",{attrs:{width:"800","mask-closable":!1},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.modalTitle))])]),i("Form",[i("FormItem",[i("label",[t._v("制度类型：")]),i("Input",{attrs:{placeholder:"请选择制度类型"},model:{value:t.isType,callback:function(e){t.isType=e},expression:"isType"}})],1),i("FormItem",[i("label",[t._v("制度标题：")]),i("Input",{attrs:{placeholder:"请输入制度标题"},model:{value:t.isTitle,callback:function(e){t.isTitle=e},expression:"isTitle"}})],1),i("FormItem",[i("label",[t._v("内容：")]),i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOptions},model:{value:t.isContent,callback:function(e){t.isContent=e},expression:"isContent"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.isView||t.isEdit?t._e():i("Button",{attrs:{type:"info",size:"large"},on:{click:t.addEntity}},[t._v("保存")]),t.isEdit?i("Button",{attrs:{type:"info",size:"large"},on:{click:t.editEntity}},[t._v("修改")]):t._e()],1)],1)],1)},n=[],s=(i("ac4d"),i("8a81"),i("ac6a"),i("c5f6"),i("28a5"),i("ebad")),o=i("66df"),l=i("c276"),r=i("88ec"),c={name:"meeting_page",components:{QuillEditor:s["a"]},data:function(){var t=this;return{is_type:"",is_title:"",columns:[{title:"序号",align:"center",key:"tr_id",sortable:!0},{title:"制度类型",align:"center",key:"is_type"},{title:"制度标题",align:"center",key:"is_title"},{title:"操作",key:"handle",align:"center",render:function(e,i){for(var a=[],n=0;n<t.handleBtns.length;n++){t.handleBtns[n];217===t.handleBtns[n].p_id?a.push(e("Button",{props:{type:"primary",size:"small",disabled:5===i.row.data_level},style:{margin:"2px"},on:{click:function(){t.showOneMeeting(t.showOnePath,i.row.tr_id),t.showModal=!0,t.modalTitle="修改",t.isView=!1,t.isEdit=!0,t.editId=i.row.tr_id}}},"修改")):218===t.handleBtns[n].p_id?a.push(e("Button",{props:{type:"info",size:"small"},style:{margin:"2px"},on:{click:function(){t.showOneMeeting(t.showOnePath,i.row.tr_id),t.showModal=!0,t.modalTitle="查看",t.isView=!0,t.isEdit=!1}}},"查看")):219===t.handleBtns[n].p_id?a.push(e("Button",{props:{type:"error",size:"small",disabled:5===i.row.data_level},style:{margin:"2px"},on:{click:function(){t.deleteEntity(i.row.tr_id)}}},"删除")):220===t.handleBtns[n].p_id&&a.push(e("Button",{props:{type:"warning",size:"small",disabled:1===i.row.data_level},style:{margin:"2px"},on:{click:function(){t.restoreEntity(i.row.tr_id)}}},"恢复"))}return e("div",a)}}],tableData:[],searchValue:"",searchKey:"",showModal:!1,modalTitle:"添加",isType:"",isTitle:"",isContent:"",header:{},quill:null,editorOptions:{placeholder:"请输入内容…",modules:{toolbar:{container:[["bold","italic","underline","strike","image","clean"],[{header:1},{header:2}],[{color:[]},{background:[]}],[{align:[]}]],handlers:{image:function(t){t?(console.log(t),document.querySelector("#upLoadImg").click()):this.quill.format("image",!1)}}}}},meUsers:[],subDepartUsers:[],permissionBtns:[],handleBtns:[],isView:!1,isEdit:!1,total:0,pageNum:1,pageSize:20,getListPath:"",showOnePath:"",editId:"",addOnePath:"",deleteOnePath:"",restoreOnePath:"",isTypeArr:[]}},methods:{handleAdd:function(){this.showModal=!0,this.isView=!1,this.isEdit=!1,this.modalTitle="添加"},getDataList:function(){var t=this;o["a"].request({url:t.getListPath,data:{pageNum:t.pageNum,pageSize:t.pageSize,isType:t.is_type,isTitle:t.is_title},method:"post"}).then(function(e){if(200===e.status){t.tableData=[];for(var i=0;i<e.data.content.list.length;i++)t.tableData.push(e.data.content.list[i])}else t.$Notice.error({title:e.data.msg})})},addEntity:function(){var t=this;o["a"].request({url:t.addOnePath,data:{isType:t.isType,isTitle:t.isTitle,isContent:t.isContent},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"添加成功"})):t.$Notice.error({title:e.data.msg})})},editEntity:function(){var t=this,e=t.meDate.getFullYear()+"-"+(t.meDate.getMonth()+1)+"-"+t.meDate.getDate()+" "+t.meDate.getHours()+":"+t.meDate.getMinutes();o["a"].request({url:"admin/adm/meeting/editEntity.do",data:{meId:t.editId,meTitle:t.meTitle,meName:t.meName,meDate:e,meUsers:t.meUsers.join(","),meFollow:"无",meContent:t.meContent},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"修改成功"})):t.$Notice.error({title:e.data.msg})})},showOneMeeting:function(t,e){var i=this;o["a"].request({url:t,data:{entityId:e},method:"post"}).then(function(t){i.meTitle=t.data.content.me_title,i.meName=t.data.content.me_name,i.meDate=t.data.content.me_date,i.meContent=t.data.content.me_content,i.meUsers=t.data.content.me_users.split(",").map(Number)})},deleteEntity:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除？",onOk:function(){o["a"].request({url:e.deleteOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"删除成功"})):e.$Notice.error({title:t.data.msg})})}})},restoreEntity:function(t){var e=this;e.$Modal.confirm({title:"提示",content:"确认恢复？",onOk:function(){o["a"].request({url:e.restoreOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"恢复成功"})):e.$Notice.error({title:t.data.msg})})}})},handleSuccess:function(t,e){var i=this;if(i.$Spin.hide(),200===t.code&&null!==t.content){var a=i.quill.getSelection().index;i.quill.insertEmbed(a,"image","http://47.106.109.254:8090/"+t.content),i.quill.setSelection(a+1)}else i.$Notice.error({title:t.msg})},handleFormatError:function(){},handleBeforeUpload:function(){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","upLoading")])}})},getSubDepartUsers:function(){var t=this;o["a"].request({url:"m/getSubDepartUsers.do",method:"post"}).then(function(e){for(var i in e.data.content)t.subDepartUsers.push({label:e.data.content[i].username,value:e.data.content[i].id})})},pageOnChange:function(t){this.pageNum=t,this.getDataList()},onPageSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getDataList()},searchKeyChange:function(){this.me_title="",this.me_name=""},getPermissionBtns:function(){this.permissionBtns=[];var t=!0,e=!1,i=void 0;try{for(var a,n=r["a"].permission[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var s=a.value;s.p_fid===this.$route.meta.id&&(this.permissionBtns.push(s),215===s.p_id&&(this.getListPath=s.p_path),216===s.p_id&&(this.addOnePath=s.p_path),218===s.p_id&&(this.showOnePath=s.p_path),219===s.p_id&&(this.deleteOnePath=s.p_path),220===s.p_id&&(this.restoreOnePath=s.p_path),217!==s.p_id&&218!==s.p_id&&219!==s.p_id&&220!==s.p_id||this.handleBtns.push(s))}}catch(t){e=!0,i=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}},mounted:function(){this.getPermissionBtns(),this.getDataList(),this.header={authorization:Object(l["i"])()},this.quill=this.$refs.myQuillEditor.quill,this.getSubDepartUsers()},watch:{showModal:function(t){t||(this.meTitle="",this.meName="",this.meDate=new Date,this.meUsers=[],this.meContent="")}}},d=c,h=(i("b89c"),i("2877")),u=Object(h["a"])(d,a,n,!1,null,null,null);u.options.__file="training.vue";e["default"]=u.exports},"4a4a":function(t,e,i){},b89c:function(t,e,i){"use strict";var a=i("4a4a"),n=i.n(a);n.a},ebad:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"quill-editor"},[t._t("toolbar"),i("div",{ref:"editor"})],2)},n=[],s=i("9339"),o=i.n(s),l={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert text here ...",readOnly:!1};const r=window.Quill||o.a;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const i=Object(t);for(let a=1;a<arguments.length;a++){const t=arguments[a];if(null!=t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}return i},writable:!0,configurable:!0});var c={name:"quill-editor",data(){return{_options:{},_content:"",defaultOptions:l}},props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,required:!1,default:()=>({})},globalOptions:{type:Object,required:!1,default:()=>({})}},mounted(){this.initialize()},beforeDestroy(){this.quill=null,delete this.quill},methods:{initialize(){this.$el&&(this._options=Object.assign({},this.defaultOptions,this.globalOptions,this.options),this.quill=new r(this.$refs.editor,this._options),this.quill.enable(!1),(this.value||this.content)&&this.quill.pasteHTML(this.value||this.content),this.disabled||this.quill.enable(!0),this.quill.on("selection-change",t=>{t?this.$emit("focus",this.quill):this.$emit("blur",this.quill)}),this.quill.on("text-change",(t,e,i)=>{let a=this.$refs.editor.children[0].innerHTML;const n=this.quill,s=this.quill.getText();"<p><br></p>"===a&&(a=""),this._content=a,this.$emit("input",this._content),this.$emit("change",{html:a,text:s,quill:n})}),this.$emit("ready",this.quill))}},watch:{content(t,e){this.quill&&(t&&t!==this._content?(this._content=t,this.quill.pasteHTML(t)):t||this.quill.setText(""))},value(t,e){this.quill&&(t&&t!==this._content?(this._content=t,this.quill.pasteHTML(t)):t||this.quill.setText(""))},disabled(t,e){this.quill&&this.quill.enable(!t)}}},d=c,h=i("2877"),u=Object(h["a"])(d,a,n,!1,null,null,null);u.options.__file="editor.vue";e["a"]=u.exports}}]);