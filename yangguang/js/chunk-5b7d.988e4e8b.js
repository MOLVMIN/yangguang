(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b7d"],{"1d7e":function(t,e,a){"use strict";var s=a("a181"),i=a.n(s);i.a},7383:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tabs",{attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"我的申请列表",name:"name1"}},[a("Card",[a("div",{staticClass:"search-con"},[a("Button",{staticClass:"search-btn",attrs:{type:"primary"}},[a("Icon",{attrs:{type:"search"}}),t._v("搜索")],1),t._l(t.permissionBtns,function(e){return 54===e.p_id?a("Button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(t._s(e.p_name))]):t._e()})],2),a("Table",{ref:"tablesAsk",attrs:{data:t.tableData,columns:t.columns}}),a("Page",{staticClass:"page",attrs:{total:t.total,"page-size":t.pageSize,transfer:"","show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange,"on-page-size-change":t.onPageSizeChange}})],1)],1),a("TabPane",{attrs:{label:"待我审批列表",name:"name2"}},[a("Card",[a("div",{staticClass:"search-con"},[a("Button",{staticClass:"search-btn",attrs:{type:"primary"}},[a("Icon",{attrs:{type:"search"}}),t._v("搜索")],1)],1),a("Table",{ref:"tablesWait",attrs:{data:t.tableData_wait,columns:t.columns_wait,stripe:!0}}),a("Page",{staticClass:"page",attrs:{total:t.total_wait,"page-size":t.pageSize_wait,transfer:"","show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange_wait,"on-page-size-change":t.onPageSizeChange_wait}})],1)],1)],1),a("Modal",{attrs:{width:"800","mask-closable":!1},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.modalTitle))])]),a("Row",[a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("离职类型：")]),a("Select",{attrs:{disabled:t.isView,placeholder:"请选择离职类型"},model:{value:t.lbType,callback:function(e){t.lbType=e},expression:"lbType"}},t._l(t.lbTypeArr,function(e){return a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])}))],1),a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("申请离职日期：")]),a("DatePicker",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,type:"date",format:"yyyy-MM-dd",placeholder:"请选择申请离职时间"},model:{value:t.lbAppDate,callback:function(e){t.lbAppDate=e},expression:"lbAppDate"}})],1),a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("核准离职日期：")]),a("DatePicker",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,type:"date",format:"yyyy-MM-dd",placeholder:"请选择核准离职时间"},model:{value:t.lbLeaveDate,callback:function(e){t.lbLeaveDate=e},expression:"lbLeaveDate"}})],1)],1),a("Row",[a("Col",{staticClass:"form-container-item",attrs:{span:"24"}},[a("label",{staticStyle:{width:"125px"}},[t._v("离职原因：")]),a("Input",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,type:"textarea"},model:{value:t.lbReason,callback:function(e){t.lbReason=e},expression:"lbReason"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.isView||t.isEdit?t._e():a("Button",{attrs:{type:"info",size:"large"},on:{click:t.addEntity}},[t._v("保存")]),t.isEdit?a("Button",{attrs:{type:"info",size:"large"},on:{click:t.editEntity}},[t._v("修改")]):t._e()],1)],1),a("Modal",{attrs:{width:"400","mask-closable":!1},model:{value:t.showSubmitModal,callback:function(e){t.showSubmitModal=e},expression:"showSubmitModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("提交提薪申请")])]),a("Row",{staticClass:"form-container"},[a("Col",{staticClass:"form-container-item",attrs:{span:"24"}},[a("label",[t._v("主任审批：")]),a("Select",{attrs:{placeholder:"请选择审批人"},model:{value:t.directorId,callback:function(e){t.directorId=e},expression:"directorId"}},t._l(t.directorList,function(e){return a("Option",{key:"search-col-"+e.id,attrs:{value:e.id}},[t._v(t._s(e.username))])}))],1),a("Col",{staticClass:"form-container-item",attrs:{span:"24"}},[a("label",[t._v("干事审批：")]),a("Select",{attrs:{placeholder:"请选择审批人"},model:{value:t.generalId,callback:function(e){t.generalId=e},expression:"generalId"}},t._l(t.generalList,function(e){return a("Option",{key:"search-col-"+e.id,attrs:{value:e.id}},[t._v(t._s(e.username))])}))],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:t.submitEntity}},[t._v("提交")])],1)],1),a("Modal",{attrs:{width:"400","mask-closable":!1},model:{value:t.showApproveModal,callback:function(e){t.showApproveModal=e},expression:"showApproveModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("审批")])]),a("Input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",placeholder:"填写通过或拒绝原因…"},model:{value:t.approveReason,callback:function(e){t.approveReason=e},expression:"approveReason"}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"warning"},on:{click:function(e){t.approveEvent(!1)}}},[t._v("驳回")]),a("Button",{attrs:{type:"info"},on:{click:function(e){t.approveEvent(!0)}}},[t._v("通过")])],1)],1),a("Modal",{attrs:{width:"400","footer-hide":""},model:{value:t.showApproveModalDetail,callback:function(e){t.showApproveModalDetail=e},expression:"showApproveModalDetail"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("详情")])]),a("div",{staticStyle:{display:"flex","justify-content":"center",margin:"5px 0"}},[a("label",[t._v("申请人：")]),a("div",[t._v("admin")])]),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("label",[t._v("申请原因：")]),a("div",[t._v("哈哈")])])])],1)},i=[],o=(a("ac4d"),a("8a81"),a("ac6a"),a("cadf"),a("551c"),a("097d"),a("66df")),n=a("c276"),l=a("90de"),r=a("88ec"),d={data:function(){var t=this;return{lbType:"",lbTypeArr:[{key:1,title:"辞职"},{key:2,title:"辞退"},{key:3,title:"除名"},{key:4,title:"自动离职"},{key:5,title:"合同到期"}],lbAppDate:null,lbLeaveDate:null,lbReason:"",columns:[{title:"序号",align:"center",key:"er_id",sortable:!0},{title:"维修描述",align:"center",key:"er_desc"},{title:"是否送修",align:"center",key:"er_is_send",render:function(t,e){return e.row.er_is_send?t("div","是"):t("div","否")}},{title:"操作",key:"handle",align:"center",minWidth:100,render:function(e,a){for(var s=[],i=0;i<t.handleBtns.length;i++){t.handleBtns[i];55===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"primary",size:"small",disabled:5===a.row.data_level||void 0!==a.row.process_id},style:{margin:"2px"},on:{click:function(){t.showOneEntity(a.row.er_id),t.showModal=!0,t.modalTitle="申请修改",t.isView=!1,t.isEdit=!0,t.editId=a.row.er_id}}},"修改")):56===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"info",size:"small"},style:{margin:"2px"},on:{click:function(){t.showOneEntity(a.row.er_id),t.showModal=!0,t.modalTitle="申请查看",t.isView=!0,t.isEdit=!1}}},"查看")):57===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"error",size:"small",disabled:5===a.row.data_level||void 0!==a.row.process_id},style:{margin:"2px"},on:{click:function(){t.deleteEntity(a.row.er_id)}}},"删除")):58===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"warning",size:"small",disabled:1===a.row.data_level},style:{margin:"2px"},on:{click:function(){t.restoreEntity(a.row.er_id)}}},"恢复")):59===t.handleBtns[i].p_id&&s.push(e("Button",{props:{type:"success",size:"small",disabled:5===a.row.data_level||void 0!==a.row.process_id},style:{margin:"2px"},on:{click:function(){t.submitEvent(a.row.er_id)}}},"提交"))}return e("div",s)}}],columns_wait:[{title:"流水号",align:"center",key:"PROC_INST_ID_"},{title:"申请人",align:"center",key:"APP_USERNAME_"},{title:"操作",key:"handle",align:"center",minWidth:100,render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showApproveModalDetail=!0}}},"详情"),e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.processId=a.row.PROC_INST_ID_,t.taskId=a.row.ID_,t.showApproveModal=!0}}},"审批")])}}],tableData:[],tableData_wait:[],total:0,total_wait:0,pageNum:1,pageNum_wait:1,pageSize:10,pageSize_wait:10,searchKey:"",searchValue:"",modalTitle:"添加申请",showModal:!1,showSubmitModal:!1,searchKey_wait:"",searchValue_wait:"",modalTitle_wait:"",showModal_wait:!1,appUser:"",appUserList:[],appUserPageNum:1,appUserPageSize:20,permissionBtns:[],handleBtns:[],addOnePath:"",editOnePath:"",getListPath:"",showOnePath:"",deleteOnePath:"",restoreOnePath:"",editId:"",submitId:"",submitPath:"",isView:!1,isEdit:!1,directorId:"",directorList:[],generalId:"",generalList:[],showApproveModal:!1,showApproveModalDetail:!1,processId:"",taskId:"",approveReason:""}},methods:{handleAdd:function(){this.showModal=!0,this.isView=!1,this.isEdit=!1,this.modalTitle="添加申请"},addEntity:function(){var t=this;o["a"].request({url:t.addOnePath,data:{appUser:Object(n["j"])(),lbType:t.lbType,lbAppDate:Object(l["b"])(new Date(t.lbAppDate),"yyyy-MM-dd hh:MM:ss"),lbLeaveDate:Object(l["b"])(new Date(t.lbLeaveDate),"yyyy-MM-dd hh:MM:ss"),lbReason:t.lbReason},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"申请添加成功"})):t.$Notice.error({title:e.data.msg})})},editEntity:function(){var t=this;o["a"].request({url:t.editOnePath,data:{lbId:t.editId,appUser:Object(n["j"])(),lbType:t.lbType,lbAppDate:Object(l["b"])(new Date(t.lbAppDate),"yyyy-MM-dd hh:MM:ss"),lbLeaveDate:Object(l["b"])(new Date(t.lbLeaveDate),"yyyy-MM-dd hh:MM:ss"),lbReason:t.lbReason},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"申请修改成功"})):t.$Notice.error({title:e.data.msg})})},deleteEntity:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除该申请？",onOk:function(){o["a"].request({url:e.deleteOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"申请删除成功"})):e.$Notice.error({title:t.data.msg})})}})},restoreEntity:function(t){var e=this;e.$Modal.confirm({title:"提示",content:"确认恢复该申请？",onOk:function(){o["a"].request({url:e.restoreOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"申请恢复成功"})):e.$Notice.error({title:t.data.msg})})}})},submitEvent:function(t){this.submitId=t,this.showSubmitModal=!0},submitEntity:function(){var t=this;t.$Modal.confirm({title:"提示",content:"确认提交申请？",onOk:function(){o["a"].request({url:t.submitPath,data:{entityId:t.submitId,directorId:t.directorId,generalId:t.generalId},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.$Notice.success({title:"申请提交成功"})):t.$Notice.error({title:e.data.msg})})}})},getDataList:function(t){var e=this;o["a"].request({url:e.getListPath,data:{pageNum:e.pageNum,pageSize:e.pageSize},method:"post"}).then(function(a){200===a.status&&(e.tableData=a.data.content.list,e.total=a.data.content.total,"function"===typeof t&&t())})},getNeedApprovalList:function(){var t=this;o["a"].request({url:"m/approval/needApproval.do",data:{pageNum:t.pageNum_wait,pageSize:t.pageSize_wait,type:"ER"},method:"post"}).then(function(e){200===e.status&&(t.tableData_wait=e.data.content.list,t.total_wait=e.data.content.total)})},showOneEntity:function(t){var e=this;o["a"].request({url:e.showOnePath,data:{entityId:t},method:"post"}).then(function(t){e.lbType=t.data.content.lb_type,e.lbAppDate=Object(l["b"])(new Date(t.data.content.lb_app_date),"yyyy-MM-dd hh:MM:ss"),e.lbLeaveDate=Object(l["b"])(new Date(t.data.content.lb_leave_date),"yyyy-MM-dd hh:MM:ss"),e.lbReason=t.data.content.lb_reason})},pageOnChange:function(t){this.pageNum=t,this.getDataList()},pageOnChange_wait:function(t){this.pageNum_wait=t,this.getNeedApprovalList()},onPageSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getDataList()},onPageSizeChange_wait:function(t){this.pageNum_wait=1,this.pageSize_wait=t,this.getNeedApprovalList()},getAppUserList:function(t){var e=this;o["a"].request({url:"",data:{pageNum:e.appUserPageNum,pageSize:e.appUserPageSize,apporType:t},method:"post"}).then(function(t){console.log(t)})},getPermissionBtns:function(){this.permissionBtns=[];var t=!0,e=!1,a=void 0;try{for(var s,i=r["a"].permission[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var o=s.value;o.p_fid===this.$route.meta.id&&(this.permissionBtns.push(o),53===o.p_id&&(this.getListPath=o.p_path),54===o.p_id&&(this.addOnePath=o.p_path),55===o.p_id&&(this.editOnePath=o.p_path),56===o.p_id&&(this.showOnePath=o.p_path),57===o.p_id&&(this.deleteOnePath=o.p_path),58===o.p_id&&(this.restoreOnePath=o.p_path),59===o.p_id&&(this.submitPath=o.p_path),55!==o.p_id&&56!==o.p_id&&57!==o.p_id&&58!==o.p_id&&59!==o.p_id||this.handleBtns.push(o))}}catch(t){e=!0,a=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}},searchKeyChange:function(){this.lb_type=""},getDirectorList:function(){var t=this;o["a"].request({url:"/m/approval/getApprovalor.do",data:{apporType:"DIRECTOR"},method:"post"}).then(function(e){t.directorList=e.data.content.list})},getGeneralList:function(){var t=this;o["a"].request({url:"/m/approval/getApprovalor.do",data:{apporType:"GENERALOR"},method:"post"}).then(function(e){t.generalList=e.data.content.list})},approveEvent:function(t){var e=this;o["a"].request({url:"/m/approval/commonApproval.do",data:{processId:e.processId,taskId:e.taskId,isPass:t,reason:e.approveReason},method:"post"}).then(function(t){200===t.status?(e.$Notice.success({title:"审批成功"}),e.showApproveModal=!1,e.processId="",e.taskId="",e.approveReason="",e.getNeedApprovalList()):e.$Notice.error({title:t.data.msg})})},getApproveDetail:function(t){o["a"].request({url:"/admin/human/updateSalary/showOneEntity.do",data:{entityId:t},method:"post"}).then(function(t){200===t.status&&console.log(t)})}},mounted:function(){this.getPermissionBtns(),this.getDataList(),this.getNeedApprovalList(),this.getDirectorList(),this.getGeneralList()},watch:{showModal:function(t){t||(this.lbType="",this.lbAppDate=null,this.lbLeaveDate=null,this.lbReason="")},showApproveModal:function(t){t||(this.processId="",this.taskId="",this.approeReason="")}}},p=d,c=(a("1d7e"),a("2877")),h=Object(c["a"])(p,s,i,!1,null,null,null);h.options.__file="equipmentRepair.vue";e["default"]=h.exports},a181:function(t,e,a){}}]);