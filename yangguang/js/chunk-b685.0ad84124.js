(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b685"],{3155:function(t,e,i){},"6c74":function(t,e,i){"use strict";var s=i("e523"),n=i.n(s);n.a},cc95:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Card",[i("div",{staticClass:"search-con search-con-top"},[i("Select",{staticClass:"search-col",attrs:{placeholder:"请选择搜索字段",clearable:""},on:{"on-clear":t.searchKeyChange,"on-change":t.searchKeyChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l([{key:"is_type",title:"类型"},{key:"is_title",title:"标题"}],function(e){return i("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])})),"is_type"===t.searchKey?i("Select",{staticClass:"search-col",attrs:{placeholder:"请选择类型",clearable:""},on:{"on-clear":t.searchKeyChange,"on-change":t.searchKeyChange},model:{value:t.is_type,callback:function(e){t.is_type=e},expression:"is_type"}},t._l(t.isTypeArr,function(e){return i("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])})):t._e(),"is_title"===t.searchKey?i("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入标题关键字搜索"},model:{value:t.is_title,callback:function(e){t.is_title=e},expression:"is_title"}}):t._e(),i("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.getDataList}},[i("Icon",{attrs:{type:"search"}}),t._v("搜索")],1),t._l(t.permissionBtns,function(e){return 203===e.p_id?i("Button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(t._s(e.p_name))]):t._e()})],2),i("Table",{ref:"tablesMain",attrs:{data:t.tableData,columns:t.columns}}),i("Page",{staticClass:"page",attrs:{total:t.total,"page-size":t.pageSize,"show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange,"on-page-size-change":t.onPageSizeChange}})],1),i("Modal",{attrs:{width:"800","mask-closable":!1},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[i("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.modalTitle))])]),i("Form",[i("FormItem",[i("label",[t._v("制度类型：")]),i("Input",{attrs:{readonly:t.isView,placeholder:"请选择制度类型"},model:{value:t.isType,callback:function(e){t.isType=e},expression:"isType"}})],1),i("FormItem",[i("label",[t._v("制度标题：")]),i("Input",{attrs:{readonly:t.isView,placeholder:"请输入制度标题"},model:{value:t.isTitle,callback:function(e){t.isTitle=e},expression:"isTitle"}})],1),t.isEdit||!t.isView&&!t.isEdit?i("FormItem",[i("label",[t._v("内容：")]),i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOptions},model:{value:t.isContent,callback:function(e){t.isContent=e},expression:"isContent"}})],1):t._e(),t.isView?i("FormItem",[i("label",[t._v("内容：")]),i("div",{staticStyle:{border:"1px solid #dfdfdf",padding:"5px","margin-bottom":"10px","border-radius":"5px"},domProps:{innerHTML:t._s(t.isContent)}})]):t._e()],1),t.isView&&!t.isEdit?i("label",[t._v("附件：")]):t._e(),i("Upload",{attrs:{action:"http://47.106.109.254:8090/m/documentFile/uploadDocument.do",headers:t.header,multiple:"",name:"document",data:{dfNo:t.editId,dfType:"institution_system"},"on-success":t.handleSuccess,"on-remove":t.handleRemove,"on-preview":t.showPreview,"before-upload":t.handleBeforeUpload,"on-format-error":t.handleFormatError,"default-file-list":t.fileList}},[!t.isView&&t.isEdit?i("Button",{attrs:{id:"upLoadImg",icon:"ios-cloud-upload-outline"}},[t._v("附件上传")]):t._e()],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[t.isView||t.isEdit?t._e():i("Button",{attrs:{type:"info",size:"large"},on:{click:t.addEntity}},[t._v("保存")]),t.isEdit?i("Button",{attrs:{type:"info",size:"large"},on:{click:t.editEntity}},[t._v("修改")]):t._e()],1)],1)],1)},n=[],a=(i("ac4d"),i("8a81"),i("ac6a"),i("ebad")),o=i("66df"),l=i("c276"),r=(i("3155"),i("88ec")),d={name:"meeting_page",components:{QuillEditor:a["a"]},data:function(){var t=this;return{is_type:"",is_title:"",fileList:[],columns:[{title:"序号",align:"center",key:"is_id",sortable:!0},{title:"制度类型",align:"center",key:"is_type"},{title:"制度标题",align:"center",key:"is_title"},{title:"操作",key:"handle",align:"center",render:function(e,i){for(var s=[],n=0;n<t.handleBtns.length;n++){t.handleBtns[n];204===t.handleBtns[n].p_id?s.push(e("Button",{props:{type:"primary",size:"small",disabled:5===i.row.data_level},style:{margin:"2px"},on:{click:function(){t.showOneEntity(i.row.is_id),t.showModal=!0,t.modalTitle="编辑",t.isView=!1,t.isEdit=!0,t.editId=i.row.is_id}}},"编辑")):205===t.handleBtns[n].p_id?s.push(e("Button",{props:{type:"info",size:"small"},style:{margin:"2px"},on:{click:function(){t.showOneEntity(i.row.is_id),t.showModal=!0,t.modalTitle="查看",t.isView=!0,t.isEdit=!1}}},"查看")):206===t.handleBtns[n].p_id?s.push(e("Button",{props:{type:"error",size:"small",disabled:5===i.row.data_level},style:{margin:"2px"},on:{click:function(){t.deleteEntity(i.row.is_id)}}},"删除")):207===t.handleBtns[n].p_id&&s.push(e("Button",{props:{type:"warning",size:"small",disabled:1===i.row.data_level},style:{margin:"2px"},on:{click:function(){t.restoreEntity(i.row.is_id)}}},"恢复"))}return e("div",s)}}],tableData:[],searchValue:"",searchKey:"",showModal:!1,modalTitle:"添加",isType:"",isTitle:"",isContent:"",header:{},quill:null,editorOptions:{placeholder:"请输入内容…",modules:{toolbar:{container:[["bold","italic","underline","strike","image","clean"],[{header:1},{header:2}],[{color:[]},{background:[]}],[{align:[]}]],handlers:{image:function(t){t?(console.log(t),document.querySelector("#upLoadImg").click()):this.quill.format("image",!1)}}}}},meUsers:[],subDepartUsers:[],permissionBtns:[],handleBtns:[],isView:!1,isEdit:!1,total:0,pageNum:1,pageSize:20,getListPath:"",showOnePath:"",editId:"",addOnePath:"",deleteOnePath:"",restoreOnePath:"",isTypeArr:[]}},methods:{handleAdd:function(){this.showModal=!0,this.isView=!1,this.isEdit=!1,this.modalTitle="添加"},getDataList:function(){var t=this;o["a"].request({url:t.getListPath,data:{pageNum:t.pageNum,pageSize:t.pageSize,isType:t.is_type,isTitle:t.is_title},method:"post"}).then(function(e){if(200===e.status){t.tableData=[];for(var i=0;i<e.data.content.list.length;i++)t.tableData.push(e.data.content.list[i])}else t.$Notice.error({title:e.data.msg})})},addEntity:function(){var t=this;o["a"].request({url:t.addOnePath,data:{isType:t.isType,isTitle:t.isTitle,isContent:t.isContent},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"添加成功"})):t.$Notice.error({title:e.data.msg})})},editEntity:function(){var t=this;o["a"].request({url:"admin/adm/meeting/editEntity.do",data:{isId:t.editId,isType:t.isType,isTitle:t.isTitle,isContent:t.isContent},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"编辑成功"})):t.$Notice.error({title:e.data.msg})})},showOneEntity:function(t){var e=this;o["a"].request({url:e.showOnePath,data:{entityId:t},method:"post"}).then(function(t){for(var i in console.log(t),e.isType=t.data.content.is_type,e.isTitle=t.data.content.is_title,e.isContent=t.data.content.is_content,e.fileList=[],t.data.content.files)e.fileList.push({id:t.data.content.files[i].df_id,name:t.data.content.files[i].df_name,url:"http://47.106.109.254:8090/"+t.data.content.files[i].df_url})})},deleteEntity:function(t){var e=this;isView?e.$Notice.warning({title:"查看中不允许删除"}):this.$Modal.confirm({title:"提示",content:"确认删除？",onOk:function(){o["a"].request({url:e.deleteOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"删除成功"})):e.$Notice.error({title:t.data.msg})})}})},restoreEntity:function(t){var e=this;e.$Modal.confirm({title:"提示",content:"确认恢复？",onOk:function(){o["a"].request({url:e.restoreOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"恢复成功"})):e.$Notice.error({title:t.data.msg})})}})},handleSuccess:function(t,e){this.$Spin.hide(),this.$Notice.success({title:"附件上传成功"})},handleRemove:function(t,e){console.log(t);var i=this;i.isView?i.$Notice.Warring({title:"查看中不允许删除"}):o["a"].request({url:"m/documentFile/removeDocument.do",method:"post",data:{documentId:t.id}}).then(function(t){200===t.data.code?i.$Notice.success({title:"删除成功"}):i.$Notice.error({title:t.data.msg})})},showPreview:function(t){window.open(t.url)},handleFormatError:function(){this.$Spin.hide()},handleBeforeUpload:function(){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","upLoading")])}})},getSubDepartUsers:function(){var t=this;o["a"].request({url:"m/getSubDepartUsers.do",method:"post"}).then(function(e){for(var i in e.data.content)t.subDepartUsers.push({label:e.data.content[i].username,value:e.data.content[i].id})})},pageOnChange:function(t){this.pageNum=t,this.getDataList()},onPageSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getDataList()},searchKeyChange:function(){this.me_title="",this.me_name=""},getPermissionBtns:function(){this.permissionBtns=[];var t=!0,e=!1,i=void 0;try{for(var s,n=r["a"].permission[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var a=s.value;a.p_fid===this.$route.meta.id&&(this.permissionBtns.push(a),202===a.p_id&&(this.getListPath=a.p_path),203===a.p_id&&(this.addOnePath=a.p_path),205===a.p_id&&(this.showOnePath=a.p_path),206===a.p_id&&(this.deleteOnePath=a.p_path),207===a.p_id&&(this.restoreOnePath=a.p_path),204!==a.p_id&&205!==a.p_id&&206!==a.p_id&&207!==a.p_id||this.handleBtns.push(a))}}catch(t){e=!0,i=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}},checkNormal:function(){var t="http://47.106.109.254:8090/file/documents/institution_system/1/服务资料泄密应对机制.pdf";window.open(t)},attachmentUpload:function(){}},mounted:function(){this.getPermissionBtns(),this.getDataList(),this.header={authorization:Object(l["i"])()},this.quill=this.$refs.myQuillEditor.quill,this.getSubDepartUsers()},watch:{showModal:function(t){t||(this.isType="",this.isTitle="",this.isContent="",this.fileList=[],this.isEdit=!1,this.isView=!1)}}},c=d,h=(i("6c74"),i("2877")),u=Object(h["a"])(c,s,n,!1,null,null,null);u.options.__file="institutionSystem.vue";e["default"]=u.exports},e523:function(t,e,i){},ebad:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"quill-editor"},[t._t("toolbar"),i("div",{ref:"editor"})],2)},n=[],a=i("9339"),o=i.n(a),l={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert text here ...",readOnly:!1};const r=window.Quill||o.a;"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const i=Object(t);for(let s=1;s<arguments.length;s++){const t=arguments[s];if(null!=t)for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}return i},writable:!0,configurable:!0});var d={name:"quill-editor",data(){return{_options:{},_content:"",defaultOptions:l}},props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,required:!1,default:()=>({})},globalOptions:{type:Object,required:!1,default:()=>({})}},mounted(){this.initialize()},beforeDestroy(){this.quill=null,delete this.quill},methods:{initialize(){this.$el&&(this._options=Object.assign({},this.defaultOptions,this.globalOptions,this.options),this.quill=new r(this.$refs.editor,this._options),this.quill.enable(!1),(this.value||this.content)&&this.quill.pasteHTML(this.value||this.content),this.disabled||this.quill.enable(!0),this.quill.on("selection-change",t=>{t?this.$emit("focus",this.quill):this.$emit("blur",this.quill)}),this.quill.on("text-change",(t,e,i)=>{let s=this.$refs.editor.children[0].innerHTML;const n=this.quill,a=this.quill.getText();"<p><br></p>"===s&&(s=""),this._content=s,this.$emit("input",this._content),this.$emit("change",{html:s,text:a,quill:n})}),this.$emit("ready",this.quill))}},watch:{content(t,e){this.quill&&(t&&t!==this._content?(this._content=t,this.quill.pasteHTML(t)):t||this.quill.setText(""))},value(t,e){this.quill&&(t&&t!==this._content?(this._content=t,this.quill.pasteHTML(t)):t||this.quill.setText(""))},disabled(t,e){this.quill&&this.quill.enable(!t)}}},c=d,h=i("2877"),u=Object(h["a"])(c,s,n,!1,null,null,null);u.options.__file="editor.vue";e["a"]=u.exports}}]);