(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccef"],{6202:function(t,e,a){"use strict";var s=a("cf3f"),i=a.n(s);i.a},b998:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Tabs",{attrs:{value:"name1"}},[a("TabPane",{attrs:{label:"我的申请列表",name:"name1"}},[a("Card",[a("div",{staticClass:"search-con"},[a("Select",{staticClass:"search-col search-con",attrs:{placeholder:"请选择搜索字段",clearable:""},on:{"on-clear":t.searchKeyChange,"on-change":t.searchKeyChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},t._l(t.searchKeyArr,function(e){return a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])})),"al_reason"===t.searchKey?a("Input",{staticClass:"search-input search-con",attrs:{clearable:"",placeholder:"输入请假原因关键字搜索"},model:{value:t.al_reason,callback:function(e){t.al_reason=e},expression:"al_reason"}}):t._e(),"al_type"===t.searchKey?a("Select",{staticClass:"search-con search-col search-value",attrs:{placeholder:"请选择请假类型",clearable:""},model:{value:t.al_type,callback:function(e){t.al_type=e},expression:"al_type"}},t._l(t.alTypeArr,function(e){return"handle"!==e.key?a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))]):t._e()})):t._e(),a("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:t.getDataList}},[a("Icon",{attrs:{type:"search"}}),t._v("搜索")],1),t._l(t.permissionBtns,function(e){return 64===e.p_id?a("Button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(t._s(e.p_name))]):t._e()})],2),a("Table",{ref:"tablesAsk",attrs:{data:t.tableData,columns:t.columns}}),a("Page",{staticClass:"page",attrs:{total:t.total,"page-size":t.pageSize,transfer:"","show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange,"on-page-size-change":t.onPageSizeChange}})],1)],1),a("TabPane",{attrs:{label:"待我审批列表",name:"name2"}},[a("Card",[a("div",{staticClass:"search-con"},[a("Button",{staticClass:"search-btn",attrs:{type:"primary"}},[a("Icon",{attrs:{type:"search"}}),t._v("搜索")],1)],1),a("Table",{ref:"tablesWait",attrs:{data:t.tableData_wait,columns:t.columns_wait,stripe:!0}}),a("Page",{staticClass:"page",attrs:{total:t.total_wait,"page-size":t.pageSize_wait,transfer:"","show-sizer":"","show-elevator":"","prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.pageOnChange_wait,"on-page-size-change":t.onPageSizeChange_wait}})],1)],1)],1),a("Modal",{attrs:{width:"800","mask-closable":!1},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.modalTitle))])]),a("Row",{attrs:{type:"flex"}},[a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("类型：")]),a("Select",{attrs:{disabled:t.isView,placeholder:"请选择请假类型"},model:{value:t.alType,callback:function(e){t.alType=e},expression:"alType"}},t._l(t.alTypeArr,function(e){return a("Option",{key:"search-col-"+e.key,attrs:{value:e.key}},[t._v(t._s(e.title))])}))],1),12===t.alType?a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("其他类型：")]),a("Input",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,placeholder:"请填写其他请假类型"},model:{value:t.otherType,callback:function(e){t.otherType=e},expression:"otherType"}})],1):t._e(),10===t.alType?a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("年假所属年度：")]),a("DatePicker",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,type:"alYear",placeholder:"选择年假所属年度"}})],1):t._e(),a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("起止时间：")]),a("DatePicker",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,type:"datetimerange",format:"yyyy-MM-dd HH:mm",placeholder:"请选择请假起止时间"},model:{value:t.alTime,callback:function(e){t.alTime=e},expression:"alTime"}})],1),a("Col",{staticClass:"form-container-item",attrs:{span:"12"}},[a("label",[t._v("联系电话：")]),a("Input",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,placeholder:"请填联系电话"},model:{value:t.alTell,callback:function(e){t.alTell=e},expression:"alTell"}})],1)],1),a("Row",[a("Col",{staticClass:"form-container-item",attrs:{span:"24"}},[a("label",{staticStyle:{width:"125px"}},[t._v("请假原因：")]),a("Input",{staticStyle:{width:"100%"},attrs:{readonly:t.isView,type:"textarea"},model:{value:t.alReason,callback:function(e){t.alReason=e},expression:"alReason"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.isView||t.isEdit?t._e():a("Button",{attrs:{type:"info",size:"large"},on:{click:t.addEntity}},[t._v("保存")]),t.isEdit?a("Button",{attrs:{type:"info",size:"large"},on:{click:t.editEntity}},[t._v("修改")]):t._e()],1)],1),a("Modal",{attrs:{width:"400","mask-closable":!1},model:{value:t.showSubmitModal,callback:function(e){t.showSubmitModal=e},expression:"showSubmitModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("提交请假申请")])]),a("Row",{staticClass:"form-container"},[a("Col",{staticClass:"form-container-item",attrs:{span:"24"}},[a("label",[t._v("主任审批：")]),a("Select",{attrs:{placeholder:"请选择审批人"},model:{value:t.directorId,callback:function(e){t.directorId=e},expression:"directorId"}},t._l(t.directorList,function(e){return a("Option",{key:"search-col-"+e.id,attrs:{value:e.id}},[t._v(t._s(e.username))])}))],1),a("Col",{staticClass:"form-container-item",attrs:{span:"24"}},[a("label",[t._v("干事审批：")]),a("Select",{attrs:{placeholder:"请选择审批人"},model:{value:t.generalId,callback:function(e){t.generalId=e},expression:"generalId"}},t._l(t.generalList,function(e){return a("Option",{key:"search-col-"+e.id,attrs:{value:e.id}},[t._v(t._s(e.username))])}))],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info",size:"large"},on:{click:t.submitEntity}},[t._v("提交")])],1)],1),a("Modal",{attrs:{width:"400","mask-closable":!1},model:{value:t.showApproveModal,callback:function(e){t.showApproveModal=e},expression:"showApproveModal"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("审批")])]),a("Input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",placeholder:"填写通过或拒绝原因…"},model:{value:t.approveReason,callback:function(e){t.approveReason=e},expression:"approveReason"}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"warning"},on:{click:function(e){t.approveEvent(!1)}}},[t._v("驳回")]),a("Button",{attrs:{type:"info"},on:{click:function(e){t.approveEvent(!0)}}},[t._v("通过")])],1)],1),a("Modal",{attrs:{width:"400","footer-hide":""},model:{value:t.showApproveModalDetail,callback:function(e){t.showApproveModalDetail=e},expression:"showApproveModalDetail"}},[a("p",{staticStyle:{color:"#2d8cf0"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("详情")])]),a("div",{staticStyle:{display:"flex","justify-content":"center",margin:"5px 0"}},[a("label",[t._v("申请人：")]),a("div",[t._v("admin")])]),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("label",[t._v("申请原因：")]),a("div",[t._v("哈哈")])])])],1)},i=[],l=(a("ac4d"),a("8a81"),a("ac6a"),a("66df")),o=a("c276"),n=a("90de"),r=a("88ec"),c={data:function(){var t=this;return{al_type:"",al_reason:"",alType:"",otherType:"",alYear:null,alTime:null,alReason:"",alTell:"",alTypeArr:[{key:1,title:"事假"},{key:2,title:"病假"},{key:3,title:"产前假"},{key:4,title:"产后假"},{key:5,title:"陪产假"},{key:6,title:"流产假"},{key:7,title:"产前检查假"},{key:8,title:"婚假"},{key:9,title:"丧假"},{key:10,title:"年假"},{key:11,title:"工伤假"},{key:12,title:"其他"}],columns:[{title:"序号",align:"center",key:"al_id",sortable:!0},{title:"请假人",align:"center",key:"username"},{title:"请假类型",align:"center",key:"al_type",render:function(t,e){return 1===e.row.al_type?t("div","事假"):2===e.row.al_type?t("div","病假"):3===e.row.al_type?t("div","产前假"):4===e.row.al_type?t("div","产后假"):5===e.row.al_type?t("div","陪产假"):6===e.row.al_type?t("div","流产假"):7===e.row.al_type?t("div","产前检查假"):8===e.row.al_type?t("div","婚假"):9===e.row.al_type?t("div","丧假"):10===e.row.al_type?t("div","年假"):11===e.row.al_type?t("div","工伤假"):12===e.row.al_type?t("div","其他"):void 0}},{title:"请假原因",align:"center",key:"al_reason"},{title:"联系电话",align:"center",key:"al_tell"},{title:"操作",key:"handle",align:"center",minWidth:100,render:function(e,a){for(var s=[],i=0;i<t.handleBtns.length;i++){t.handleBtns[i];65===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"primary",size:"small",disabled:5===a.row.data_level||void 0!==a.row.process_id},style:{margin:"2px"},on:{click:function(){t.showOneEntity(a.row.al_id),t.showModal=!0,t.modalTitle="申请修改",t.isView=!1,t.isEdit=!0,t.editId=a.row.al_id}}},"修改")):66===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"info",size:"small"},style:{margin:"2px"},on:{click:function(){t.showOneEntity(a.row.al_id),t.showModal=!0,t.modalTitle="申请查看",t.isView=!0,t.isEdit=!1}}},"查看")):67===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"error",size:"small",disabled:5===a.row.data_level||void 0!==a.row.process_id},style:{margin:"2px"},on:{click:function(){t.deleteEntity(a.row.al_id)}}},"删除")):68===t.handleBtns[i].p_id?s.push(e("Button",{props:{type:"warning",size:"small",disabled:1===a.row.data_level},style:{margin:"2px"},on:{click:function(){t.restoreEntity(a.row.al_id)}}},"恢复")):69===t.handleBtns[i].p_id&&s.push(e("Button",{props:{type:"success",size:"small",disabled:5===a.row.data_level||void 0!==a.row.process_id},style:{margin:"2px"},on:{click:function(){t.submitEvent(a.row.al_id)}}},"提交"))}return e("div",s)}}],columns_wait:[{title:"流水号",align:"center",key:"PROC_INST_ID_"},{title:"申请人",align:"center",key:"APP_USERNAME_"},{title:"操作",key:"handle",align:"center",minWidth:100,render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showApproveModalDetail=!0}}},"详情"),e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.processId=a.row.PROC_INST_ID_,t.taskId=a.row.ID_,t.showApproveModal=!0}}},"审批")])}}],tableData:[],tableData_wait:[],total:0,total_wait:0,pageNum:1,pageNum_wait:1,pageSize:10,pageSize_wait:10,searchKey:"",searchKeyArr:[{key:"al_reason",title:"请假原因"},{key:"al_type",title:"请假类型"}],searchValue:"",modalTitle:"添加申请",showModal:!1,showViewModal:!1,showSubmitModal:!1,searchKey_wait:"",searchValue_wait:"",modalTitle_wait:"",showModal_wait:!1,appUser:"",appUserList:[],appUserPageNum:1,appUserPageSize:20,permissionBtns:[],handleBtns:[],addOnePath:"",editOnePath:"",getListPath:"",showOnePath:"",deleteOnePath:"",restoreOnePath:"",editId:"",submitId:"",submitPath:"",isView:!1,isEdit:!1,directorId:"",directorList:[],generalId:"",generalList:[],atOrgindepart:"",atOrginrole:"",atNewdepart:"",atNewrole:"",atDescript:"",showApproveModal:!1,showApproveModalDetail:!1,processId:"",taskId:"",approveReason:""}},methods:{handleAdd:function(){this.showModal=!0,this.isView=!1,this.isEdit=!1,this.modalTitle="添加申请"},addEntity:function(){var t=this;l["a"].request({url:t.addOnePath,data:{appUser:Object(o["j"])(),alType:t.alType,alYear:t.alYear,otherType:t.otherType,alStarttime:Object(n["b"])(new Date(t.alTime[0]),"yyyy-MM-dd hh:MM:ss"),alEndtime:Object(n["b"])(new Date(t.alTime[1]),"yyyy-MM-dd hh:MM:ss"),alDays:Object(n["a"])(Object(n["b"])(new Date(t.alTime[0]),"yyyy-MM-dd hh:MM:ss"),Object(n["b"])(new Date(t.alTime[1]),"yyyy-MM-dd hh:MM:ss")),alReason:t.alReason,alTell:t.alTell},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"申请添加成功"})):t.$Notice.error({title:e.data.msg})})},editEntity:function(){var t=this;l["a"].request({url:t.editOnePath,data:{alId:t.editId,appUser:Object(o["j"])(),alType:t.alType,alYear:t.alYear,otherType:t.otherType,alStarttime:Object(n["b"])(new Date(t.alTime[0]),"yyyy-MM-dd hh:MM:ss"),alEndtime:Object(n["b"])(new Date(t.alTime[1]),"yyyy-MM-dd hh:MM:ss"),alDays:Object(n["a"])(Object(n["b"])(new Date(t.alTime[0]),"yyyy-MM-dd hh:MM:ss"),Object(n["b"])(new Date(t.alTime[1]),"yyyy-MM-dd hh:MM:ss")),alReason:t.alReason,alTell:t.alTell},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.showModal=!1,t.$Notice.success({title:"申请修改成功"})):t.$Notice.error({title:e.data.msg})})},deleteEntity:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"确认删除该申请？",onOk:function(){l["a"].request({url:e.deleteOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"申请删除成功"})):e.$Notice.error({title:t.data.msg})})}})},restoreEntity:function(t){var e=this;e.$Modal.confirm({title:"提示",content:"确认恢复该申请？",onOk:function(){l["a"].request({url:e.restoreOnePath,data:{entityId:t},method:"post"}).then(function(t){200===t.data.code?(e.getDataList(),e.$Notice.success({title:"申请恢复成功"})):e.$Notice.error({title:t.data.msg})})}})},submitEvent:function(t){this.submitId=t,this.showSubmitModal=!0},submitEntity:function(){var t=this;t.$Modal.confirm({title:"提示",content:"确认提交申请？",onOk:function(){l["a"].request({url:t.submitPath,data:{entityId:t.submitId,directorId:t.directorId,generalId:t.generalId},method:"post"}).then(function(e){200===e.data.code?(t.getDataList(),t.$Notice.success({title:"申请提交成功"})):t.$Notice.error({title:e.data.msg})})}})},getDataList:function(t){var e=this;l["a"].request({url:e.getListPath,data:{pageNum:e.pageNum,pageSize:e.pageSize,type:e.al_type,reason:e.al_reason},method:"post"}).then(function(a){200===a.status&&(e.tableData=a.data.content.list,e.total=a.data.content.total,"function"===typeof t&&t())})},getNeedApprovalList:function(){var t=this;l["a"].request({url:"m/approval/needApproval.do",data:{pageNum:t.pageNum_wait,pageSize:t.pageSize_wait,type:"AL"},method:"post"}).then(function(e){200===e.status&&(t.tableData_wait=e.data.content.list,t.total_wait=e.data.content.total)})},showOneEntity:function(t){var e=this;l["a"].request({url:e.showOnePath,data:{entityId:t},method:"post"}).then(function(t){e.alType=t.data.content.al_type,e.alTime=[new Date(t.data.content.al_starttime),new Date(t.data.content.al_endtime)],e.alYear=e.alYear,e.otherType=e.otherType,e.alDays=t.data.content.al_days,e.alReason=t.data.content.al_reason,e.alTell=t.data.content.al_tell})},pageOnChange:function(t){this.pageNum=t,this.getDataList()},pageOnChange_wait:function(t){this.pageNum_wait=t,this.getNeedApprovalList()},onPageSizeChange:function(t){this.pageNum=1,this.pageSize=t,this.getDataList()},onPageSizeChange_wait:function(t){this.pageNum_wait=1,this.pageSize_wait=t,this.getNeedApprovalList()},getAppUserList:function(t){var e=this;l["a"].request({url:"",data:{pageNum:e.appUserPageNum,pageSize:e.appUserPageSize,apporType:t},method:"post"}).then(function(t){console.log(t)})},getPermissionBtns:function(){this.permissionBtns=[];var t=!0,e=!1,a=void 0;try{for(var s,i=r["a"].permission[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var l=s.value;l.p_fid===this.$route.meta.id&&(this.permissionBtns.push(l),63===l.p_id&&(this.getListPath=l.p_path),64===l.p_id&&(this.addOnePath=l.p_path),65===l.p_id&&(this.editOnePath=l.p_path),66===l.p_id&&(this.showOnePath=l.p_path),67===l.p_id&&(this.deleteOnePath=l.p_path),68===l.p_id&&(this.restoreOnePath=l.p_path),69===l.p_id&&(this.submitPath=l.p_path),65!==l.p_id&&66!==l.p_id&&67!==l.p_id&&68!==l.p_id&&69!==l.p_id||this.handleBtns.push(l))}}catch(t){e=!0,a=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw a}}},searchKeyChange:function(){this.lb_type=""},getDirectorList:function(){var t=this;l["a"].request({url:"/m/approval/getApprovalor.do",data:{apporType:"DIRECTOR"},method:"post"}).then(function(e){t.directorList=e.data.content.list})},getGeneralList:function(){var t=this;l["a"].request({url:"/m/approval/getApprovalor.do",data:{apporType:"GENERALOR"},method:"post"}).then(function(e){t.generalList=e.data.content.list})},approveEvent:function(t){var e=this;l["a"].request({url:"/m/approval/commonApproval.do",data:{processId:e.processId,taskId:e.taskId,isPass:t,reason:e.approveReason},method:"post"}).then(function(t){200===t.status?(e.$Notice.success({title:"审批成功"}),e.showApproveModal=!1,e.processId="",e.taskId="",e.approveReason="",e.getNeedApprovalList()):e.$Notice.error({title:t.data.msg})})},getApproveDetail:function(t){l["a"].request({url:"/admin/human/updateSalary/showOneEntity.do",data:{entityId:t},method:"post"}).then(function(t){200===t.status&&console.log(t)})}},mounted:function(){this.getPermissionBtns(),this.getDataList(),this.getNeedApprovalList(),this.getDirectorList(),this.getGeneralList()},watch:{showModal:function(t){t||(this.alType="",this.alTime=null,this.alYear=null,this.otherType="",this.alDays=0,this.alReason="",this.alTell="")},showApproveModal:function(t){t||(this.processId="",this.taskId="",this.approeReason="")}}},d=c,p=(a("6202"),a("2877")),h=Object(p["a"])(d,s,i,!1,null,null,null);h.options.__file="askLeave.vue";e["default"]=h.exports},cf3f:function(t,e,a){}}]);